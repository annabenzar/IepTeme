#include <iostream>
#include <string>

class Obiect{};

class Om{
    protected:
    Om(){} //permit construirea automata a constr
    ~Om(){}//si a destructorului
    private :
        //Item 6 - prevenirea folosirii copy constructor si copy operator 
        //declarare fara implementare
        Om(const Om&); //previn copierea
        Om& operator = (const Om&); 
};

class Persoana : private Om{
    private:
    std:: string nume;
    std:: string prenume;
    int varsta;
    Obiect *ob;
     
    //Item 6 - prevenirea folosirii copy constructor si copy operator 
    //(puteau fi folosite de metodele membre si prietene ale clasei)
    // Persoana(const Persoana&);
    // Persoana& operator=(const Persoana&);

    public: 
        //Item4 -init cu lista de membri 
        Persoana(std::string nume, std::string prenume, int varsta,Obiect *ob)
            : nume(nume),prenume(prenume),varsta(varsta),ob(ob){}

        std::string getNume(){
            return nume;
        }
        std::string getPrenume(){
            return prenume;
        }
        int getVarsta(){
            return varsta;
        }
        

    //Item 10 - have assignment operators return a reference to this
    Persoana& operator =(const Persoana& rhs){
        // poate fii aceeasi persoana

        //Item 11 -> Handle assignment to self operator
        if(this == &rhs) return *this; //pt eficienta
        std::cout<<"Nu s-au assignat obiecte identice! se poate continua executia"<<std::endl;
        
        //cand apeleze delete pot sterge ambele obiecte
        Obiect* originalOb = ob;
        ob = new Obiect(*rhs.ob);
        delete originalOb;
        //dc apare o execeptie
        return *this;
    }

};





int main(){

    Persoana p("Benzar","Anna",22,new Obiect); 
    Persoana p2("Benzar","Eny",32,new Obiect);

    p2=p;

    std::string numeP = p.getNume();
    std::string prenumeP = p.getPrenume();
    int varstaP = p2.getVarsta();

    std::cout<<"Prima persoana: "<<std::endl;
    std::cout<< "Nume: "<<numeP<<std::endl; 
    std::cout<< "Prenume: "<<prenumeP<<std::endl;
    std::cout<< "Varsta: "<<varstaP<<std::endl;

}